<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>First KnockOut Test App</title>

    <script type="text/javascript" src="lib/knockout-3.1.0.js"></script>
    <script src="lib/jquery-1.11.1.min.js"></script>
    <script src="lib/bootstrap-3.2.0-dist/js/bootstrap.min.js"></script>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script type="text/javascript" src="http://www.amcharts.com/lib/3/amcharts.js"></script>
    <script type="text/javascript" src="http://www.amcharts.com/lib/3/pie.js"></script>
    <script type="text/javascript" src="http://www.amcharts.com/lib/3/themes/light.js"></script>

    <script src="js/myPieChart.js"></script>


    <link rel="stylesheet" type="text/css" href="lib/bootstrap-3.2.0-dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="lib/bootstrap-3.2.0-dist/css/bootstrap-theme.min.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">

</head>
<body>

<header id="header" role="navigation" class="navbar navbar-inverse">
    <ul class="nav navbar-nav pull-left">
        <li><a href="#">
            <span>
                <span style="color: white;">Fly</span>
                <span style="color: #B3CEE4">OnTime</span>
                <span style="color: white;">.us</span>
            </span>
        </a></li>
    </ul>
    <ul class="nav navbar-nav pull-right">
        <li><a href="#">About</a></li>
        <li><a href="#">Statistics</a></li>
        <li><a href="#">Source/Data/API</a></li>
        <li><a href="#">Airport Security</a></li>
    </ul>
</header>
<div class="menu-section">
    <ul class="nav navbar-nav pull-left">
        <li><label>Flights from : </label></li>
        <li><input type="text" value="ORD"/></li>
        <li><img src="images/swap.png"></li>
        <li><label>To : </label></li>
        <li><input type="text" value="LAX"/></li>
        <li><label>(optional)</label></li>
        <li><button>Search>></button></li>
    </ul>
</div>
<div style="width:100%;">
    <div class="row fixed-width center-block">
        <h1 style="margin-top: 1.5em">
            <div class="row fixed-width pull-left">Chicago, IL: O'Hare (ORD)</div>
            <div class="row fixed-width pull-left">to Los Angeles, CA: Los Angeles International (LAX)</div>
        </h1>
        <h3 class="row">
            Flight Delay Summary
        </h3>
        <div class="row">
            <div class="col-lg-3 vertical-divider">

                <div class="info" style="text-align: center">
                    Based on 7273 flights from 01/01/2010 to 12/31/2010
                </div>
                <div id="chart-container">

                </div>

                <div class="row"><div class="col-lg-2"> 71% </div><div class="col-lg-10"><b>On time</b></div></div>
                <div class="row"><div class="col-lg-2"> 15% </div><div class="col-lg-10"><b>15-20 min. Delay</b></div></div>
                <div class="row"><div class="col-lg-2"> 13% </div><div class="col-lg-10"><b>>20min Delay</b></div></div>
                <div class="row"><div class="col-lg-2"> 1% </div><div class="col-lg-10"><b>Cancelled/Diverted</b></div></div>

            </div>
            <div class="col-lg-9">
                <table border="0" cellpadding="" cellspacing="1">
                    <tbody><tr>
                        <td>
                        </td><th style="padding-right: 1em">Average<div style="font-size: 70%; color: #666; font-weight: normal">(median)</div></th>
                        <th style="padding-right: 1em">Be Prepared For<div style="font-size: 70%; color: #666; font-weight: normal">(85<sup>th</sup> percentile)</div></th>
                        <th>Cancelled<div style="font-size: 70%; color: #666; font-weight: normal">or diverted</div></th>
                    </tr>

                    <tr style="">
                        <td style="">In Good Weather... </td>
                        <td> <span style="">9 min. early</span> </td>
                        <td> <span style="">12 min. late</span> </td>
                        <td>1% </td>
                    </tr>
                    <tr style="">
                        <td style="">In Bad Weather... </td>
                        <td> <span style="">4 min. early</span> </td>
                        <td> <span style="">31 min. late</span> </td>
                        <td>2% </td>
                    </tr>
                    <tr style="font-size: 80%; color: #944">
                        <td style="padding-left: 1em">In Fog... <span style="font-size: 75%; color: #C88">(5%)</span></td>
                        <td> <span style="">5 min. late</span> </td>
                        <td> <span style="">52 min. late</span> </td>
                        <td>6% </td>
                    </tr>
                    <tr style="font-size: 80%; color: #944">
                        <td style="padding-left: 1em">In Rain... <span style="font-size: 75%; color: #C88">(33%)</span></td>
                        <td> <span style="">2 min. early</span> </td>
                        <td> <span style="">34 min. late</span> </td>
                        <td>2% </td>
                    </tr>
                    <tr style="font-size: 80%; color: #944">
                        <td style="padding-left: 1em">In Snow... <span style="font-size: 75%; color: #C88">(15%)</span></td>
                        <td> <span style="">5 min. early</span> </td>
                        <td> <span style="">30 min. late</span> </td>
                        <td>4% </td>
                    </tr>
                    <tr style="font-size: 80%; color: #944">
                        <td style="padding-left: 1em">In Thunder... <span style="font-size: 75%; color: #C88">(12%)</span></td>
                        <td> <span style="">6 min. late</span> </td>
                        <td> <span style="">57 min. late</span> </td>
                        <td>2% </td>
                    </tr>
                    </tbody></table>
                <p class="info" style="margin-bottom: 2em;margin-top: 2em;">“Be Prepared For”
                    gives the longest delay you can reasonably expect to occur.
                    Only the unluckiest 15 percent of flights experience longer delays.
                </p>
                <p style="margin-bottom: 2em;margin-top: 2em;>
                    <img src="http://forecast.weather.gov/images/wtf/small/nbkn.png" style="float: left; margin: 4px 1em 1em 0px" border="1">
                    Current weather is 63.0 F (17.2 C) and Mostly Cloudy, 73% humidity, and 10.00 miles visibility
                    <span style="font-size: 70%; color: #555">at
                        <a href="http://www.weather.gov/xml/current_obs/KORD.xml">CHICAGO OHARE INTL AP, US, IL</a>
                        as of Wed, 30 Jul 2014 06:51:00 -0500
                    </span>.
                </p>
            </div>
        </div>
    </div>
</div>
</body>
<script>
    var w = 200,                        //width
            h = 200,                            //height
            r = 80,                            //radius
            //color = d3.scale.category20c();     //builtin range of colors

    data = [
        {"color":"green", "value":71},
        {"color":"blue", "value":13},
        {"color":"red", "value":1},
        {"color":"yellow", "value":15}];

    var vis = d3.select("#chart-container")
            .append("svg:svg")              //create the SVG element inside the <body>
            .data([data])                   //associate our data with the document
            .attr("width", w)           //set the width and height of our visualization (these will be attributes of the <svg> tag
            .attr("height", h)
            .append("svg:g")                //make a group to hold our pie chart
            .attr("transform", "translate(" + r + "," + r + ")")    //move the center of the pie chart from 0, 0 to radius, radius

    var arc = d3.svg.arc()              //this will create <path> elements for us using arc data
            .outerRadius(r);

    var pie = d3.layout.pie()           //this will create arc data for us given a list of values
            .value(function(d) { return d.value; });    //we must tell it out to access the value of each element in our data array

    var arcs = vis.selectAll("g.slice")     //this selects all <g> elements with class slice (there aren't any yet)
            .data(pie)                          //associate the generated pie data (an array of arcs, each having startAngle, endAngle and value properties)
            .enter()                            //this will create <g> elements for every "extra" data element that should be associated with a selection. The result is creating a <g> for every object in the data array
            .append("svg:g")                //create a group to hold each slice (we will have a <path> and a <text> element associated with each slice)
            .attr("class", "slice");    //allow us to style things in the slices (like text)

    arcs.append("svg:path")
            .attr("fill", function(d, i) { return data[i].color; } ) //set the color for each slice to be chosen from the color function defined above
            .attr("d", arc);                                    //this creates the actual SVG path using the associated data (pie) with the arc drawing function

    arcs.append("svg:text")                                     //add a label to each slice
            .attr("transform", function(d) {                    //set the label's origin to the center of the arc
                //we have to make sure to set these before calling arc.centroid
                d.innerRadius = 0;
                d.outerRadius = r;
                return "translate(" + arc.centroid(d) + ")";        //this gives us a pair of coordinates like [50, 50]
            })
            .attr("text-anchor", "middle");        //get the label from our original data array

</script>
</html>